\# DinoQuiz ゲーム仕様書（正本）



\## 0. 概要

DinoQuiz は、恐竜をテーマにしたスマホ向けブラウザクイズゲームである。  

GitHub Pages 上で動作し、基本機能はオフライン（localStorage）で完結する。  

オンライン機能は対戦モードのみを対象とする。



---



\## 1. 基本構成

\- トップ画面

\- ホーム画面

\- クイズ画面（ステージ）

\- 結果画面

\- アバター画面

\- ガチャ画面

\- タイムアタック

\- エンドレス

\- - 対戦モード（CPU / ルーム作成 / ルーム入室）




---



\## 2. ステージクイズ（通常モード）



\### 2-1. 概要

\- `stages.json` を正本とする

\- 各ステージは固定の問題セットを持つ

\- 1問ずつ出題し、全問終了で結果画面へ遷移



\### 2-2. 出題ルール

\- 問題文はタイプライター方式で表示

\- 表示中も回答可能

\- 各問題に制限時間あり（`questions.json` の `time\_limit`）



\### 2-3. 判定

\- 正解判定は `questions.json` の `correct\_index` を使用

\- 正解時は「〇」、不正解時は「×」を大きく表示



---



\## 3. タイムアタックモード



\### 3-1. 概要

\- 制限時間内にどれだけ多く正解できるかを競うモード

\- ステージ選択はなく、全問題プールからランダム出題



\### 3-2. ルール

\- 総制限時間：60秒

\- 問題は重複なしでランダム出題

&nbsp; - プールが尽きた場合は再シャッフル

\- 1問ごとの制限時間は設けない

\- 一時停止中はタイマー停止



\### 3-3. 終了条件

\- 制限時間が 0 になった時点で終了



\### 3-4. スコア

\- 正解数をスコアとして記録



\### 3-5. 報酬

\- 正解数 × 5 コイン（※後日調整可）



---



\## 4. エンドレスモード



\### 4-1. 概要

\- ミス許容回数内で、どこまで正解を続けられるかを競うモード

\- 出題は全問題プールからランダム




\### 4-2. ルール

\- 問題はランダム出題（重複なし、尽きたら再シャッフル）

\- 問題文はタイプライター方式

\- 一時停止可能



\### 4-3. 終了条件

\- \*\*不正解が 3 回に達した時点で終了\*\*



\### 4-4. スコア

\- 正解数

\- 回答数

\- ミス数（最大 3）



エンドレス報酬（確定仕様｜案A）

獲得コイン計算式

獲得コイン = 正解数 × 2 + ⌊正解数 / 10⌋ × 10


例

正解 9問 → 18コイン

正解 10問 → 30コイン

正解 25問 → 70コイン

設計意図（仕様書向け要約）

基本報酬は控えめ（短時間でも破綻しない）

長く続けるとボーナスが効き、挑戦価値が上がる

係数調整で後からバランス調整しやすい


---



\## 5. アバター



\### 5-1. 概要

\- `avatar\_items.json` を正本とする

\- body / head を装備可能

\- ホーム画面およびクイズ画面に表示



\### 5-2. 表示

\- クイズ画面では以下のレイヤー順で合成表示

&nbsp; 1. 背景

&nbsp; 2. アバター（body → head）

&nbsp; 3. クイズ台



---



\## 6. ガチャ



\### 6-1. 概要

\- `gacha\_packs.json` を正本とする

\- バナー選択 → ガチャ実行 → 演出 → 獲得表示 の流れ



\### 6-2. 演出

\- mp4 動画による演出を再生

\- スキップ可能

\- 演出後に獲得アイテムを表示



\### 6-3. 獲得処理

\- コインを消費して抽選

\- 既所持アイテムは重複獲得しない

\- 重複時は「すでに所持」として表示のみ



---



\## 7. 称号



\### 7-1. 概要

\- `titles.json` を正本とする

\- 条件達成時に解放される



\### 7-2. 想定される解放条件（例）

\- タイムアタックで一定以上の正解数

\- エンドレスで連続正解数を達成

\- ガチャ回数

\- 通常ステージ全クリア



※ 実装時に条件を確定させる



---



## 8. 対戦モード

### 8-1. 概要
- 対戦モードは以下の3つで構成する
  - CPU対戦（オフライン）
  - ルーム作成（オンライン）
  - ルーム入室（オンライン）
- 詳細仕様は `battle_online_spec.md` を正本とする

### 8-2. UI方針
- UIのベースは「一人用（ステージ）クイズ画面」を流用する
- 対戦時はプレイヤー情報（名前/称号/アバター/スコア）を追加表示して拡張する

### 8-3. 注意事項
- 切断・タイムアウト・マッチ不成立時の挙動は必ず仕様書に従う
- クライアント側で勝敗を決定しない（オンラインはサーバ正）



---



\## 9. セーブデータ

\- `save\_spec.md` を正本とする

\- localStorage に保存

\- 直接 localStorage を操作するのは禁止



---



\## 10. 実装方針

\- 仕様書にない独断実装は禁止

\- 修正は原則「丸ごと差し替え」

\- 正本（specs / data）を最優先とする



