# ステージ仕様書

本ドキュメントは、恐竜クイズゲーム
**「目指せ！恐竜博士！」** における
ステージ設計および運用ルールを定義する正本仕様である。

---

## 1. 基本方針

- ステージは **テーマ × 難易度** の組み合わせで構成する
- すべてのステージは 1プレイ完結型とする
- クイズ内容は原則として事実ベースとし、
  映画ステージのみ例外的に映画設定を許容する

---

## 2. 難易度区分

すべてのテーマは以下4段階の難易度を持つ。

| 難易度 | 概要 |
|------|------|
| 初級 | 有名恐竜・基礎知識中心。短文で直感的 |
| 中級 | 特徴・比較・少し考える内容 |
| 上級 | 紛らわしい選択肢・説明文あり |
| 超級 | 誤解・説の違い・文脈理解を要求 |

※ 数値暗記や専門用語の丸暗記は原則避ける

---

## 3. ステージ構成ルール

- 1ステージあたり **10問固定**
- すべて4択式
- 同一恐竜は複数ステージで再登場してよい
- 問題の切り口（時代・特徴・比較など）を変えること

---

## 4. 出題形式

- text_choice（テキスト4択）
- image_choice（画像4択）

画像を使用する問題は、
1ステージあたり **最大2〜3問程度** を目安とする。

---

## 5. 映画ステージ特則

映画ステージでは、以下を必須とする。

- ステージ名・説明で「映画設定」であることを明示
- 問題文では
  - 「映画では〜と描かれている」
  - 「作中では〜」
  などの表現を用いる
- 事実との差異がある場合でも、
  映画設定としての正解を採用する

---

## 6. 画像問題（image_choice）設計ルール

image_choice（画像4択）形式は、以下の条件を満たす場合にのみ使用する。

### 6-1. 使用可能な問題形式

image_choice は、**見た目そのものを識別させる問題**として使用する。

例：
- 「ティラノサウルスはこの中でどれ？」
- 「背中に大きな板が並んでいる恐竜はどれ？」
- 「長い首を持つ草食恐竜はどれ？」

この形式では、**選択肢すべてに画像を使用する**。

---

### 6-2. 使用禁止の問題形式

以下のような問題では image_choice を使用してはならない。

- 「この恐竜の名前はどれ？」＋画像4択
- main 画像と同一の見た目を選ばせるだけの問題

これらは、視覚的な一致によって正解が分かってしまい、
学習効果・クイズ性が低下するため禁止とする。

---

### 6-3. main と choice の役割

- **main 画像**：
  - 問題の主題を示す補助画像
  - image_choice では原則使用しない（choice のみで完結させる）
  - text_choice では使用可（画像＋文字選択）

- **choice 画像**：
  - 選択肢として並ぶ4枚の画像
  - すべて同条件（向き・大きさ・テイスト）で揃える

---

### 6-4. 推奨運用

- 初級〜中級：image_choice は少なめに使用
- 上級・超級：
  - 似た恐竜同士
  - 細かな見た目の違い
  を問う問題で積極的に使用する

---

## 7. クイズ生成運用ルール

- クイズ生成は
  **1回あたり最大2ステージ分（20問）** を上限とする
- 生成後、必ず
  - 問題文
  - 正解
  - 映画／事実の区分
  を確認してからマスタに追加する

---

## 7. マスタデータとの関係

- ステージ情報は `data/stages.json` に記述する
- クイズ本体は `data/questions.json` を参照する
- ステージは問題IDの配列を保持するのみとし、
  問題内容を直接持たない

---

## 8. 今後の拡張方針

- 新テーマ追加時も
  「4難易度構成」を原則維持する
- 問題数増加による
  ステージ再編・追加を許容する

本仕様は、初期リリースおよび将来拡張の
双方を想定した正式仕様とする。

### ステージ出題ルール（共通）

- 出題は「テーマに沿った事実・知識」を問うこと。
- 問題文・選択肢に、ゲームやクイズそのものに言及するメタ表現を入れない。
  - NG例：「このステージで〜」「恐竜クイズで〜」「クイズにする時の注意として〜」「総まとめとして〜」
  - OK例：時代・分類・生態・化石・地理・特徴・出来事など、テーマ内の内容だけで完結する問い

### 難易度の扱い

- 初級：用語・代表的恐竜・超基本（時代の前後、特徴の直感）
- 中級：代表種＋特徴の理由、近縁/別系統（翼竜・海生爬虫類など）を混同しない
- 上級：より具体（地質学的用語、分類群名、環境変化、代表的な化石産地や分布の傾向）
- 超級：総集編にしない。「マニアック枠」として、具体性・専門性を上げる
  - 例：科/亜科/分類群（竜脚形類など）、代表的な地層名・地域、形態用語（フリル、尾の棍棒等）の機能仮説の比較、年代のより細かい前後関係など
  - 注意：不確実な学説は断定しすぎず「〜と考えられている/説がある」で表現する

### 映画（ジュラシック）ステージ

- 映画設定として出題する場合は、問題文に「（映画設定）/（映画演出）」等を必ず付ける。
- ただし「映画をクイズにする注意点」など、クイズ自体を語るメタ問題は入れない。

